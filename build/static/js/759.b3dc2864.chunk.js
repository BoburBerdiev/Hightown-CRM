"use strict";(self.webpackChunkhightowncity_crm=self.webpackChunkhightowncity_crm||[]).push([[759],{84268:(e,s,t)=>{t.d(s,{A:()=>n});t(65043);var a=t(50289),r=t(33307),i=t(70579);const n=e=>{let{label:s,name:t,required:n,required_text:l,warning:o}=e;return(0,i.jsx)(a.A.Item,{label:o?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:s}),(0,i.jsx)("br",{}),(0,i.jsx)("p",{children:o})]}):(0,i.jsx)("div",{children:s}),name:t,rules:[{required:n,message:l}],children:(0,i.jsx)(r.A,{})})}},49759:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var a=t(65043),r=t(50289),i=t(48193),n=t(47419),l=t(11645),o=t(50525),d=t(89421),c=t(82907),u=t(59888),m=t(53648),h=t(73216),f=t(14556),p=t(36213),x=t(84268),g=t(86178),A=t.n(g),y=t(70579);const j={name:"",finishedDate:""},S=()=>{const[e]=r.A.useForm(),s=(0,h.Zp)(),{editId:t}=(0,f.d4)((e=>e.editData)),g=(0,f.wA)(),{mutate:S,data:v,isLoading:b,isSuccess:w}=(0,c.useMutation)((e=>{let{url:s,data:t}=e;return u.A.postData(s,t)}),{onSuccess:()=>{i.Ay.success("Success")},onError:e=>{for(let s in e.response.data)i.Ay.error("".concat(s,": ").concat(e.response.data[s]))}}),{isLoading:D,data:F,refetch:E,isSuccess:I}=(0,c.useQuery)(["edit-slot",t],(()=>u.A.getDataByID("/Slot",t)),{enabled:!1}),{mutate:V,isLoading:q,data:C,isSuccess:L}=(0,c.useMutation)((e=>{let{url:s,data:t,id:a}=e;return u.A.editData(s,t,a)}),{onSuccess:()=>{i.Ay.success("Success")},onError:e=>{for(let s in e.response.data)i.Ay.error("".concat(s,": ").concat(e.response.data[s]))}});(0,a.useEffect)((()=>{L&&g({type:p.aT,payload:""}),(w||L)&&s("/slot")}),[v,C]),(0,a.useEffect)((()=>{""!==t&&E()}),[t]),(0,a.useEffect)((()=>{""===t&&e.setFieldsValue(j)}),[]),(0,a.useEffect)((()=>{if(I){const s={name:null===F||void 0===F?void 0:F.name,finishedDate:A()(null===F||void 0===F?void 0:F.finishedDate)};e.setFieldsValue(s)}}),[F]);return(0,a.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("myFormValues"));s&&(s.images=[],e.setFieldsValue(s));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,y.jsx)("div",{children:b||D||q?(0,y.jsx)(m.HE,{}):(0,y.jsxs)(r.A,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:e=>{const s={name:e.name,finishedDate:e.finishedDate};I?V({url:"/Slot",data:s,id:t}):S({url:"/Slot/",data:s})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,y.jsxs)(n.A,{gutter:20,children:[(0,y.jsx)(l.A,{span:12,children:(0,y.jsx)(x.A,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0442\u0430",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0442\u0430",name:"name"})}),(0,y.jsx)(l.A,{span:12,children:(0,y.jsx)(r.A.Item,{label:"\u0412\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",name:"finishedDate",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f."}],children:(0,y.jsx)(o.A,{})})})]}),(0,y.jsx)(d.A,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:I?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})}}}]);
//# sourceMappingURL=759.b3dc2864.chunk.js.map